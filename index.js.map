{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/soundwawe-api.js","../src/js/helpers.js","../src/js/render-artists.js","../src/js/event-listeners-callbacks.js","../src/main.js"],"sourcesContent":["export const artistListEl = document.querySelector('.artists-list');\nexport const artistModalEl = document.querySelector('.artist-modal');\nexport const artistModalList = document.querySelector('.artist-modal-list');\nexport const artistModalPagesEl = document.querySelector('.artist-modal-pages');\nexport const searchFormEl = document.querySelector('.filters');\nexport const genresListEl = document.querySelector('.js-genres-list');\n","import axios from 'axios';\n\nconst BASE_URL = 'https://sound-wave.b.goit.study/api';\naxios.defaults.baseURL = BASE_URL;\nexport const PER_PAGE = 8;\n\nexport async function getAllGenres() {\n  const response = await axios.get('/genres');\n  return response.data;\n}\n\nexport async function getArtists(query = {}, page = 1) {\n  const params = { limit: PER_PAGE, page, ...query };\n\n  const response = await axios.get('/artists', {\n    params,\n  });\n  return {\n    artists: response.data.artists,\n    totalArtists: response.data.totalArtists,\n  };\n}\n\nexport async function getArtistInfoById(id) {\n  const response = await axios.get(`/artists/${id}/albums`);\n  return response.data;\n}\n\nexport async function getFeedbacks(page = 1) {\n  const params = { limit: PER_PAGE, page };\n  const response = await axios.get('/feedbacks', {\n    params,\n  });\n  return response.data.data;\n}\n","import { PER_PAGE } from './soundwawe-api';\n\nexport function convertTime(ms) {\n  const seconds = Math.floor(ms / 1000);\n  const minutes = Math.floor(seconds / 60);\n  const remainingSeconds = seconds % 60;\n  return `${minutes}:${remainingSeconds < 10 ? '0' : ''}${remainingSeconds}`;\n}\n\nexport function getTotalPages(totalArtists) {\n  const totalPages = Math.ceil(totalArtists / PER_PAGE);\n  return totalPages;\n}\n","import { artistListEl, artistModalPagesEl, genresListEl } from './refs';\n\nexport function renderArtistCard(artist) {\n  const { genres, strArtist, strArtistThumb, strBiographyEN, _id } = artist;\n  const artistCard = `<li class=\"artist-card\" data-id=\"${_id}\"> \n  \n    <img  class=\"artist-thumb\" src=\"${strArtistThumb}\" alt=\"${strArtist}\">\n    <ul class=\"artist-genres\">\n    ${renderArtistGenresList(genres)}\n    </ul>\n    <h2 class=\"artist-name\">${strArtist}</h2>\n    <p class=\"artist-biography\">${strBiographyEN}</p>\n    </li>`;\n\n  return artistCard;\n}\n\nexport function renderArtistGenresList(genres) {\n  const genresList = genres.map(genre => `<li>${genre}</li>`).join('');\n  return genresList;\n}\n\nexport function renderArtistList(artistList) {\n  const artistListMarkup = artistList.map(renderArtistCard).join('');\n  artistListEl.innerHTML = '';\n  artistListEl.insertAdjacentHTML('beforeend', artistListMarkup);\n}\n\nexport function renderGenresList(genres) {\n  const genresList = genres.map(({ genre }) => `<li>${genre}</li>`).join('');\n  genresListEl.insertAdjacentHTML('beforeend', genresList);\n}\n\nexport function renderPagination(page, totalPages) {\n  let html = '';\n\n  // ← Previous\n  html += `\n    <a href=\"#artists\" class=\"page-btn\" ${\n      page === 1 ? 'disabled' : ''\n    } data-page=\"${page - 1}\">\n      ←\n    </a>\n  `;\n\n  // Pages\n  // First page\n  html += `<a href=\"#artists\" class=\"page-btn ${\n    page === 1 ? 'active' : ''\n  }\" data-page=\"1\">1</a>`;\n\n  // Dots after first page\n  if (page > 3) {\n    html += `<span class=\"dots\">...</span>`;\n  }\n\n  // Previous neighbor\n  if (page > 2) {\n    html += `<a href=\"#artists\" class=\"page-btn\" data-page=\"${page - 1}\">${\n      page - 1\n    }</a>`;\n  }\n\n  // Current page (if not first and not last)\n  if (page !== 1 && page !== totalPages) {\n    html += `<a href=\"#artists\" class=\"page-btn active\" data-page=\"${page}\">${page}</a>`;\n  }\n\n  // Next neighbor\n  if (page < totalPages - 1) {\n    html += `<a href=\"#artists\" class=\"page-btn\" data-page=\"${page + 1}\">${\n      page + 1\n    }</a>`;\n  }\n\n  // Dots before last page\n  if (page < totalPages - 2) {\n    html += `<span class=\"dots\">...</span>`;\n  }\n\n  // Last page\n  if (totalPages > 1) {\n    html += `<a href=\"#artists\" class=\"page-btn ${\n      page === totalPages ? 'active' : ''\n    }\" data-page=\"${totalPages}\">${totalPages}</a>`;\n  }\n\n  // → Next\n  html += `\n    <a href=\"#artists\" class=\"page-btn\" ${\n      page === totalPages ? 'disabled' : ''\n    } data-page=\"${page + 1}\">\n      →\n    </a> \n  `;\n\n  artistModalPagesEl.innerHTML = html;\n}\n","import { getTotalPages } from './helpers';\nimport { getArtists } from './soundwawe-api';\nimport { renderArtistList } from './render-artists';\nimport { renderPagination } from './render-artists';\n\nlet currentPage = 1;\nlet currentQuery = {};\nlet previousInputValue = '';\nlet previousSelector = null;\n\nexport async function onSearchArtistsByInput(e) {\n  try {\n    const name = e.target.value.trim();\n\n    if (name.length === previousInputValue.length) {\n      console.log('object');\n      return;\n    }\n    previousInputValue = name;\n\n    // currentQuery = {};\n    if (name) {\n      currentQuery.name = name;\n    }\n\n    // ВИНЕСТИ В ОКРЕМУ ФУНКЦІЮ\n    currentPage = 1;\n    const { artists, totalArtists } = await getArtists(\n      currentQuery,\n      currentPage\n    );\n    renderArtistList(artists);\n    renderPagination(currentPage, getTotalPages(totalArtists));\n  } catch (error) {\n    console.log(error);\n  }\n}\n// NEVER OPEN THIS FUNCTION IN THE FUTURE\nexport async function onSearchArtistsByClick(e) {\n  try {\n    if (e.target.tagName === 'BUTTON') {\n      const nextElementSibling = e.target.nextElementSibling;\n      nextElementSibling.classList.toggle('is-hidden');\n      if (previousSelector && previousSelector !== nextElementSibling) {\n        previousSelector.classList.add('is-hidden');\n      }\n      previousSelector = nextElementSibling;\n      return;\n    }\n\n    //Click logic\n    if (e.target.tagName === 'LI') {\n      const select = e.target.closest('.select');\n      const input = select.querySelector('.select-input');\n      const button = select.querySelector('.select-btn');\n      const listWrapper = select.querySelector('.select-list-wrapper');\n\n      if (input) {\n        input.value = e.target.textContent.trim();\n      }\n\n      // NEED TO UNDERSTAND NEED TO WATCH\n      if (button) {\n        const textNode = Array.from(button.childNodes).find(\n          node => node.nodeType === Node.TEXT_NODE\n        );\n        if (textNode) {\n          const textContent = e.target.textContent.trim();\n          textNode.nodeValue = textContent;\n          const selectValue = select.dataset.selectName;\n\n          if (selectValue === 'sortName') {\n            if (textContent === 'Default') {\n              delete currentQuery.sortName;\n            } else {\n              currentQuery = {\n                ...currentQuery,\n                [selectValue]: textContent === 'Z-A' ? 'desc' : 'asc',\n              };\n            }\n          } else {\n            if (textContent === 'All Genres') {\n              delete currentQuery.genre;\n            } else {\n              currentQuery = {\n                ...currentQuery,\n                [selectValue]: textContent,\n              };\n            }\n          }\n          currentPage = 1;\n          const { artists, totalArtists } = await getArtists(\n            currentQuery,\n            currentPage\n          );\n          renderArtistList(artists);\n          renderPagination(currentPage, getTotalPages(totalArtists));\n        }\n      }\n\n      if (listWrapper) {\n        listWrapper.classList.add('is-hidden');\n      }\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n// IM SERIOUSLY\n\nexport async function onArtistModalPagesClick(e) {\n  const btn = e.target.closest('.page-btn');\n  if (!btn || btn.disabled || btn.classList.contains('active')) return;\n\n  const newPage = Number(btn.dataset.page);\n  currentPage = newPage;\n\n  const { artists, totalArtists } = await getArtists(currentQuery, currentPage);\n  renderArtistList(artists);\n  renderPagination(currentPage, getTotalPages(totalArtists));\n}\n","import './js/feedback';\nimport './js/search-form';\nimport { artistModalPagesEl, genresListEl, searchFormEl } from './js/refs';\nimport {\n  onSearchArtistsByInput,\n  onSearchArtistsByClick,\n  onArtistModalPagesClick,\n} from './js/event-listeners-callbacks';\nimport {\n  renderArtistList,\n  renderArtistGenresList,\n  renderPagination,\n  renderGenresList,\n} from './js/render-artists';\nimport { getTotalPages } from './js/helpers';\nimport { getAllGenres, getArtists } from './js/soundwawe-api';\n\n// TESTS!!!!!!!!!!!!!!!!!!!!!!!!!\n// const result = await getArtistInfoById('65b0fda6ba67998416821076');\n// const { artists, totalArtists } = await getArtists();\n\n// renderArtistModalPreview(result);\n// renderArtistModalAlbumsList(result);\n// renderArtistList(artists);\n// renderPagination(currentPage, getTotalPages(totalArtists));\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\nasync function init() {\n  const { artists, totalArtists } = await getArtists();\n  renderArtistList(artists);\n  const genres = await getAllGenres();\n  renderPagination(1, getTotalPages(totalArtists));\n  renderGenresList(genres);\n}\ninit();\n\n// -------------------EVENT LISTENERS-------------------\nsearchFormEl.addEventListener('input', onSearchArtistsByInput);\nsearchFormEl.addEventListener('click', onSearchArtistsByClick);\n\nartistModalPagesEl.addEventListener('click', onArtistModalPagesClick);\n"],"names":["artistListEl","artistModalPagesEl","searchFormEl","genresListEl","BASE_URL","axios","PER_PAGE","getAllGenres","getArtists","query","page","params","response","getTotalPages","totalArtists","renderArtistCard","artist","genres","strArtist","strArtistThumb","strBiographyEN","_id","renderArtistGenresList","genre","renderArtistList","artistList","artistListMarkup","renderGenresList","genresList","renderPagination","totalPages","html","currentPage","currentQuery","previousInputValue","previousSelector","onSearchArtistsByInput","name","artists","error","onSearchArtistsByClick","nextElementSibling","select","input","button","listWrapper","textNode","node","textContent","selectValue","onArtistModalPagesClick","btn","init"],"mappings":"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"}