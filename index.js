import{a as h,S as ge,N as pe,P as be,R as z,i as G,b as U,A as Y}from"./assets/vendor-BREOjyBh.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();const he="https://sound-wave.b.goit.study/api";h.defaults.baseURL=he;const F=8;async function ye(){return(await h.get("/genres")).data}async function j(e={},t=1){const s={limit:F,page:t,...e},o=await h.get("/artists",{params:s});return{artists:o.data.artists,totalArtists:o.data.totalArtists}}async function Le(e){return(await h.get(`/artists/${e}/albums`)).data}async function ke(e=1){const t={limit:F,page:e};return(await h.get("/feedbacks",{params:t})).data.data}const ve=document.querySelectorAll(".arrow-btn");async function we(){const e=document.querySelector(".swiper-wrapper");try{const t=[1,2,3];(await Promise.all(t.map(r=>ke(r)))).flat().sort(()=>Math.random()-.5).slice(0,8).forEach(({descr:r,name:a,rating:l})=>{const i=document.createElement("div");i.classList.add("swiper-slide");const f=Math.round(l);i.innerHTML=`
      <div class="feedback-item">
        <div class="raty" data-score="${f}"></div>
        <p class="feedback-text">"${r}"</p>
        <p class="feedback-author">${a}</p>
      </div>
    `,e.appendChild(i)}),document.querySelectorAll(".raty").forEach(r=>{const a=r.dataset.score;new z(r,{starType:"i",score:a,readOnly:!0}).init()})}catch(t){console.error("Error fetching feedbacks:",t),e.innerHTML=`
      <div class="swiper-slide">
        <div class="feedback-item">
          <p class="feedback-text">Could not load reviews. Please try again later.</p>
        </div>
      </div>
    `,ve.forEach(s=>{s.style.display="none"})}}we().then(()=>{new ge(".swiper",{modules:[pe,be],speed:400,spaceBetween:30,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(e,t){return`<span class="${t}"></span>`}}})});const k=document.querySelector(".artists-list"),M=document.querySelector(".modal"),y=document.querySelector(".backdrop-with-modal"),g=document.querySelector(".artists-pages"),Se=document.querySelector(".js-genres-list"),Ee=document.querySelector(".filter-btn"),p=document.querySelector(".filters"),J=document.querySelector(".artists-not-found"),Ae=document.querySelectorAll(".js-reset-btn"),P=document.querySelector(".modal-loader"),Q=document.querySelector(".artists-loader"),X=document.querySelector(".modal-content"),Z=document.querySelector(".artist-list-wrapper"),ee=document.querySelector(".filters-dropdown-wrapper");function Ce(e){const t=Math.floor(e/1e3),s=Math.floor(t/60),o=t%60;return`${s}:${o<10?"0":""}${o}`}function H(e){return Math.ceil(e/F)}function u(e){return e===null||e===0||e===void 0||e.trim()===""}const I="/ArtistsHub/assets/sprite-YCidRCUV.svg";function qe(e){const{genres:t,strArtist:s,strArtistThumb:o,strBiographyEN:n,_id:r}=e;return`<li class="artist-card"> 
  
    <img  class="artist-thumb" src="${o}" alt="${s}">
    ${t.length>0?`<ul class="artist-genres">
    ${Me(t)}
    </ul>`:""}
    <h2 class="artist-name">${s}</h2>
    <p class="artist-biography">${u(n)?"information missing":n}</p>
    <button class="learn-more-btn" data-id="${r}">Learn More<svg width="24" height="24">
              <use href="${I}#icon-caret-right"></use>
            </svg></button>
    </li>`}function Me(e){return e.map(s=>`<li class="genre-item">${s}</li>`).join("")}function D(e){const t=e.map(qe).join("");k.innerHTML="",k.insertAdjacentHTML("beforeend",t)}function Te(e){const t=e.map(({genre:s})=>`<li class="select-item">${s}</li>`).join("");Se.insertAdjacentHTML("beforeend",t)}function O(e,t){if(e>t)return;if(t===1){g.innerHTML="",g.classList.add("is-hidden");return}g.classList.remove("is-hidden");let s="";const o=window.innerWidth;s+=n(!0),s+=l(1),(e>3||o<768&&e>2)&&(s+=a()),e>2&&o>=768&&(s+=l(e-1)),e!==1&&e!==t&&(s+=l(e)),e<t-1&&o>=768&&(s+=l(e+1)),(e<t-2||o<768&&t-1)&&(s+=a()),t>1&&(s+=l(t)),s+=n(!1),g.innerHTML=s;function n(i){const f=e===(i?1:t);return`
    <a 
      ${f?"":'href="#artists-content"'}
      class="page-btn artists-arrow-btn ${f?"disabled":""}"
      ${f?"":`data-page="${e+(i?-1:1)}"`}>      
      <svg width="24" height="24">
        <use href="${I}${i?"#left-arrow-btn":"#right-arrow-btn"}"></use>
      </svg>
    </a>
  `}function r(i){return i===e}function a(){return'<span class="dots">...</span>'}function l(i){return`<a ${r(i)?"":'href="#artists-content"'} class="page-btn ${r(i)?"active":""}" data-page="${i}">${i}</a>`}}function $e(){P.classList.remove("is-hidden")}function xe(){P.classList.add("is-hidden")}function S(){Q.classList.remove("is-hidden")}function E(){Q.classList.add("is-hidden")}function Ne(){X.classList.remove("is-hidden")}function Be(){X.classList.add("is-hidden")}function A(){Z.classList.remove("is-hidden")}function C(){Z.classList.add("is-hidden")}function Fe(e){const{strArtist:t,strArtistThumb:s,intFormedYear:o,intDiedYear:n,strGender:r,intMembers:a,strCountry:l,strBiographyEN:i,genres:f,albumsList:ae}=e,ie=M.querySelector(".modal-main-heading"),ce=M.querySelector(".modal-artist-img"),le=document.querySelector(".js-modal-years"),de=document.querySelector(".js-modal-sex"),ue=document.querySelector(".js-modal-members"),me=document.querySelector(".js-modal-country"),fe=document.querySelector(".js-modal-bio"),W=document.querySelector(".modal-info-genres-list"),V=document.querySelector(".artist-modal-list");ie.textContent=t,ce.src=s,le.textContent=u(o)&&u(n)?"-":`${u(o)?"unknown":o}-${u(n)?"present":n}`,de.textContent=u(r)?"-":r.trim(),ue.textContent=u(a)?"-":a,me.textContent=u(l)?"-":l.trim(),fe.textContent=u(i)?"information missing":i.trim(),W.innerHTML="",W.insertAdjacentHTML("beforeend",je(f)),V.innerHTML="",V.insertAdjacentHTML("beforeend",He(ae))}function je(e){return e.map(s=>`<li class="modal-info-genre-li"><p class="modal-info-genre">${s}</p></li>`).join("")}function He(e){return e.map(s=>Ie(s)).join("")}function Ie({strAlbum:e,tracks:t}){return`<li class="modal-table-li"><h2 class="artist-modal-album-title">${e}</h2>
                        <table class="artist-modal-album">
                            <thead>
                                <tr>
                                   <th class="position-left" scope="col">Track</th>
                                   <th scope="col">Time</th>
                                   <th scope="col">Link</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${De(t)}
                            </tbody>
                        </table></li>`}function De(e){return e.map(s=>Oe(s)).join("")}function Oe({strTrack:e,intDuration:t,movie:s}){const o=s?`<svg class="icon-modal-artist-track-list" width="24" height="24"><use href="${I}#youtube"></use></svg>`:"";return`<tr>
                        <td class="position-left track-name">${e}</td>
                        <td class="track-time ">${Ce(t)}</td>
                        <td><a class="link-modal-artist-track-list" href="${s}">${o}</a></td>
                    </tr>`}let m=1,d={},K="",L=null;async function _(e,t){const{artists:s,totalArtists:o}=await j(e,t);if(o===0){k.innerHTML="",g.innerHTML="",J.classList.remove("visually-hidden");return}J.classList.add("visually-hidden"),D(s),O(t,H(o))}async function _e(e){try{C(),S();const t=e.target.value.trim();if(t.length===K.length)return;K=t,t?d.name=t:delete d.name,m=1,await _(d,m)}catch(t){console.log(t)}finally{E(),A()}}async function Re(e){try{if(e.target.closest(".select-btn")){const t=e.target.closest(".select-btn").nextElementSibling;t.classList.toggle("is-hidden"),L&&L!==t&&L.classList.add("is-hidden"),L=t;return}if(e.target.tagName==="LI"){const t=e.target.closest(".select"),s=t.querySelector(".select-input"),o=t.querySelector(".select-btn"),n=t.querySelector(".select-list-wrapper");if(s&&(s.value=e.target.textContent.trim()),o){const r=Array.from(o.childNodes).find(a=>a.nodeType===Node.TEXT_NODE);if(r){const a=e.target.textContent.trim();r.nodeValue=a;const l=t.dataset.selectName;l==="sortName"?a==="Default"?delete d.sortName:d={...d,[l]:a==="Z-A"?"desc":"asc"}:a==="All Genres"?delete d.genre:d={...d,[l]:a},m=1,C(),S(),await _(d,m)}}n&&n.classList.add("is-hidden")}}catch(t){console.log(t)}finally{E(),A()}}async function We(e){const t=e.target.closest(".page-btn");if(!(!t||t.disabled||t.classList.contains("active")))try{const s=Number(t.dataset.page);if(s<1)return;m=s,C(),S();const{artists:o,totalArtists:n}=await j(d,m),r=H(n);D(o),O(m,r)}catch(s){console.log(s)}finally{E(),A()}}async function Ve(e){y.classList.add("is-open"),document.body.style.overflow="hidden",Be(),$e(),y.addEventListener("click",te),document.addEventListener("keydown",se);try{const t=await Le(e.target.dataset.id);Fe(t)}catch(t){console.log(t)}finally{xe(),Ne();const t=M.querySelector(".modal-info-text");t&&(t.scrollTop=0)}}function te(e){const t=e.target.closest(".modal-close-button"),s=e.target===y;(t||s)&&re()}function se(e){e.key==="Escape"&&re()}function re(){y.classList.remove("is-open"),document.body.style.overflow="",y.removeEventListener("click",te),document.removeEventListener("keydown",se)}function Ge(e){e.target.closest(".filter-btn").nextElementSibling.classList.toggle("is-open")}function Ue(e){d={},m=1;const t=p.querySelectorAll(".select-btn");t[0].childNodes[0].nodeValue="Sorting",t[1].childNodes[0].nodeValue="Genre",p.reset(),_(d,m)}function Ye(e){const t=e.currentTarget,s=e.relatedTarget;if(t.contains(s))return;t.querySelectorAll(".select-list-wrapper").forEach(r=>r.classList.add("is-hidden")),t.querySelectorAll(".select-btn").forEach(r=>r.nextElementSibling.classList.add("is-hidden"))}let T=!1;function Je(){T=!0,setTimeout(()=>{T=!1},150)}function Ke(e){if(T)return;const t=e.currentTarget,s=e.relatedTarget;t.contains(s)||p.classList.remove("is-open")}const ze="https://sound-wave.b.goit.study/api",Pe="/feedbacks",Qe=document.querySelector(".js-feedback-btn"),R=document.querySelector(".backdrop-feedback-modal"),c=document.querySelector(".feedback-modal-form"),Xe=document.querySelector(".js-feedback-modal-close-btn"),ne=document.body,$=document.querySelector("[data-raty]"),x=c.querySelector('[data-error-for="name"]'),N=c.querySelector('[data-error-for="message"]'),B=c.querySelector('[data-error-for="rating"]'),v=c.elements.name,w=c.elements.message;//! Зірочки
const b=new z($,{starType:"i",click(e){e>=1&&($.classList.remove("feedback-modal-error"),B.textContent="")}});b.init();const Ze=e=>h.post(`${ze}${Pe}`,e);//! Валідація
const et=e=>(v.classList.remove("feedback-modal-error"),w.classList.remove("feedback-modal-error"),x.textContent="",N.textContent="",B.textContent="",!e.name||e.name.length<3?(v.classList.add("feedback-modal-error"),x.textContent="Name must be at least 3 characters long",!1):!e.descr||e.descr.length<10?(w.classList.add("feedback-modal-error"),N.textContent="Description must be at least 10 characters long",!1):!e.rating||e.rating<1?($.classList.add("feedback-modal-error"),B.textContent="Please select a rating from 1 to 5",!1):!0),tt=()=>{const e=v.value.trim(),t=w.value.trim();e.length>=3&&(v.classList.remove("feedback-modal-error"),x.textContent=""),t.length>=10&&(w.classList.remove("feedback-modal-error"),N.textContent="")},st=async e=>{e.preventDefault();const t={name:c.elements.name.value.trim(),rating:b.score(),descr:c.elements.message.value.trim()};if(et(t)){console.log(t);try{const s=await Ze(t);console.log(s),G.success({message:"Your feedback submited successfully",position:"topRight",color:"#9f7ab2"}),localStorage.removeItem("feedbackFormData"),c.reset(),b.score(0),q()}catch(s){console.log(s),G.error({message:"Error submitting feedback",position:"topRight",color:"#af4040"})}}},q=()=>{R.classList.remove("is-open"),ne.classList.remove("no-scroll"),localStorage.removeItem("feedbackFormData"),c.reset(),b.score(0)},oe=()=>{R.classList.add("is-open"),ne.classList.add("no-scroll")},rt=({key:e})=>{e==="Escape"&&q()},nt=({target:e})=>{e===R&&q()},ot=()=>{const e=localStorage.getItem("feedbackFormData");if(!e)return;const t=JSON.parse(e);oe(),t&&(c.elements.name.value=t.name||"",c.elements.message.value=t.descr||"",t.rating&&b.score(t.rating))},at=()=>{const e={name:c.elements.name.value.trim(),descr:c.elements.message.value.trim(),rating:b.score()};localStorage.setItem("feedbackFormData",JSON.stringify(e))};//! Відкриття модалки
Qe.addEventListener("click",oe);//! Закриття модалки
Xe.addEventListener("click",q);window.addEventListener("keydown",rt);window.addEventListener("click",nt);//! видалення помилки валідації при введенні полів
c.addEventListener("input",tt);//! відправка на бекенд
c.addEventListener("submit",st);//! збереження, видалення і отримання даних з LS
window.addEventListener("DOMContentLoaded",ot);c.addEventListener("click",at);const it=["./img/webp/default-webp-for-hero-slider/image-slider-01.webp","./img/webp/default-webp-for-hero-slider/image-slider-02.webp","./img/webp/default-webp-for-hero-slider/image-slider-03.webp","./img/webp/default-webp-for-hero-slider/image-slider-04.webp","./img/webp/default-webp-for-hero-slider/image-slider-05.webp"];document.querySelector(".splide__list");function ct(){new U("#slider-left",{direction:"ttb",height:"500px",type:"loop",drag:!1,arrows:!1,pagination:!1,autoScroll:{speed:.5}}).mount({AutoScroll:Y}),new U("#slider-right",{direction:"ttb",height:"500px",type:"loop",drag:!1,arrows:!1,pagination:!1,autoScroll:{speed:-.5}}).mount({AutoScroll:Y})}function lt(e){const t=document.querySelector("#slider-left .splide__list"),s=document.querySelector("#slider-right .splide__list");t.innerHTML="",s.innerHTML="";const o=e.map(r=>`<li class="splide__slide">
              <img src="${r.strArtistThumb}" alt="${r.strArtist}" />
            </li>`).join(""),n=e.slice().reverse().map(r=>`<li class="splide__slide">
              <img src="${r.strArtistThumb}" alt="${r.strArtist} />
            </li>`).join("");t.insertAdjacentHTML("beforeend",o),s.insertAdjacentHTML("beforeend",n),ct()}function dt(e){const t=e.map(s=>s.strArtistThumb).filter(Boolean);return t.length===0?it:t}const ut=()=>{const e=document.querySelector(".burger-btn"),t=document.querySelector(".cross-icon"),s=document.querySelector(".burger-icon"),o=document.querySelector(".menu-burger"),n=document.querySelector(".menu-burger"),r=()=>{console.log("toggle"),s.classList.toggle("hide"),t.classList.toggle("hide"),n.classList.toggle("hide")};e.addEventListener("click",r),o.addEventListener("click",a=>{console.log(a.target.tagName),(a.target.tagName==="LI"||a.target.tagName==="A")&&(console.log(a.target.tagName),r())})};ut();async function mt(){C(),S();try{const{artists:e,totalArtists:t}=await j(),s=dt(e);lt(s.map(n=>({strArtistThumb:n}))),D(e);const o=await ye();O(1,H(t)),Te(o)}catch(e){console.log(e)}finally{E(),A()}}mt();p.addEventListener("input",_e);p.addEventListener("click",Re);p.addEventListener("focusout",Ye);ee.addEventListener("focusout",Ke);ee.addEventListener("mousedown",Je);g.addEventListener("click",We);Ee.addEventListener("click",Ge);Ae.forEach(e=>e.addEventListener("click",Ue));k.addEventListener("click",e=>{e.target.closest(".learn-more-btn")&&Ve(e)});
//# sourceMappingURL=index.js.map
