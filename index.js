import{a as b,S as be,N as ye,P as he,R as Q,i as z,b as Y,A as J}from"./assets/vendor-BREOjyBh.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();const Le="https://sound-wave.b.goit.study/api";b.defaults.baseURL=Le;const j=8;async function ke(){return(await b.get("/genres")).data}async function H(e={},t=1){const s={limit:j,page:t,...e},r=await b.get("/artists",{params:s});return{artists:r.data.artists,totalArtists:r.data.totalArtists}}async function ve(e){return(await b.get(`/artists/${e}/albums`)).data}async function we(e=1){const t={limit:j,page:e};return(await b.get("/feedbacks",{params:t})).data.data}const Se=document.querySelectorAll(".arrow-btn");async function Ee(){const e=document.querySelector(".swiper-wrapper");try{const t=[1,2,3];(await Promise.all(t.map(o=>we(o)))).flat().filter((o,i,c)=>i===c.findIndex(u=>u.descr===o.descr&&u.name===o.name)).sort(()=>Math.random()-.5).slice(0,10).forEach(({descr:o,name:i,rating:c})=>{const u=document.createElement("div");u.classList.add("swiper-slide");const $=Math.round(c);u.innerHTML=`
      <div class="feedback-item">
        <div class="raty" data-score="${$}"></div>
        <p class="feedback-text">"${o}"</p>
        <p class="feedback-author">${i}</p>
      </div>
    `,e.appendChild(u)}),document.querySelectorAll(".raty").forEach(o=>{const i=o.dataset.score;new Q(o,{starType:"i",score:i,readOnly:!0}).init()})}catch(t){console.error("Error fetching feedbacks:",t),e.innerHTML=`
      <div class="swiper-slide">
        <div class="feedback-item">
          <p class="feedback-text">Could not load reviews. Please try again later.</p>
        </div>
      </div>
    `,Se.forEach(s=>{s.style.display="none"})}}Ee().then(()=>{new be(".swiper",{modules:[ye,he],speed:400,spaceBetween:30,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!0,renderBullet:function(e,t){return`<span class="${t}"></span>`}}})});const k=document.querySelector(".artists-list"),x=document.querySelector(".modal"),h=document.querySelector(".backdrop-with-modal"),g=document.querySelector(".artists-pages"),Ae=document.querySelector(".js-genres-list"),Ce=document.querySelector(".filter-btn"),p=document.querySelector(".filters"),K=document.querySelector(".artists-not-found"),qe=document.querySelectorAll(".js-reset-btn"),X=document.querySelector(".modal-loader"),Z=document.querySelector(".artists-loader"),ee=document.querySelector(".modal-content"),te=document.querySelector(".artist-list-wrapper"),Te="https://sound-wave.b.goit.study/api",Me=document.querySelector(".js-feedback-btn"),E=document.querySelector(".backdrop-feedback-modal"),l=document.querySelector(".feedback-modal-form"),$e=document.querySelector(".js-feedback-modal-close-btn"),se=document.body,v=document.querySelector("[data-raty]");l.querySelector('[data-error-for="name"]');l.querySelector('[data-error-for="message"]');const re=document.querySelector(".filters-dropdown-wrapper");function xe(e){const t=Math.floor(e/1e3),s=Math.floor(t/60),r=t%60;return`${s}:${r<10?"0":""}${r}`}function D(e){return Math.ceil(e/j)}function m(e){return e===null||e===0||e===void 0||e.trim()===""||e.trim().length<4}const O="/ArtistsHub/assets/sprite-YCidRCUV.svg";function Fe(e){const{genres:t,strArtist:s,strArtistThumb:r,strBiographyEN:n,_id:a}=e;return`<li class="artist-card"> 
  
    <img class="artist-thumb" src="${r}" alt="${s}" loading="lazy" decoding="async">
    ${t.length>0?`<ul class="artist-genres">
    ${Ne(t)}
    </ul>`:""}
    <h2 class="artist-name">${s}</h2>
    <p class="artist-biography">${m(n)?"information missing":n}</p>
    <button class="learn-more-btn" data-id="${a}">Learn More<svg width="24" height="24">
              <use href="${O}#icon-caret-right"></use>
            </svg></button>
    </li>`}function Ne(e){return e.map(s=>`<li class="genre-item">${s}</li>`).join("")}function _(e){const t=e.map(Fe).join("");k.innerHTML="",k.insertAdjacentHTML("beforeend",t)}function Be(e){const t=e.map(({genre:s})=>`<li class="select-item">${s}</li>`).join("");Ae.insertAdjacentHTML("beforeend",t)}function R(e,t){if(e>t)return;if(t===1){g.innerHTML="",g.classList.add("is-hidden");return}g.classList.remove("is-hidden");let s="";const r=window.innerWidth;s+=n(!0),s+=i(1),(e>3||r<768&&e>2)&&(s+=o()),e>2&&r>=768&&(s+=i(e-1)),e!==1&&e!==t&&(s+=i(e)),e<t-1&&r>=768&&(s+=i(e+1)),(e<t-2||r<768&&t-1)&&(s+=o()),t>1&&(s+=i(t)),s+=n(!1),g.innerHTML=s;function n(c){const u=e===(c?1:t);return`
    <a 
      ${u?"":'href="#artists-content"'}
      class="page-btn artists-arrow-btn ${u?"disabled":""}"
      ${u?"":`data-page="${e+(c?-1:1)}"`}
        aria-label="next page">      
      <svg width="24" height="24">
        <use href="${O}${c?"#left-arrow-btn":"#right-arrow-btn"}"></use>
      </svg>
    </a>
  `}function a(c){return c===e}function o(){return'<span class="dots">...</span>'}function i(c){return`<a ${a(c)?"":'href="#artists-content"'} class="page-btn ${a(c)?"active":""}" data-page="${c}">${c}</a>`}}function Ie(){X.classList.remove("is-hidden")}function je(){X.classList.add("is-hidden")}function A(){Z.classList.remove("is-hidden")}function C(){Z.classList.add("is-hidden")}function He(){ee.classList.remove("is-hidden")}function De(){ee.classList.add("is-hidden")}function q(){te.classList.remove("is-hidden")}function T(){te.classList.add("is-hidden")}function Oe(e){const{strArtist:t,strArtistThumb:s,intFormedYear:r,intDiedYear:n,strGender:a,intMembers:o,strCountry:i,strBiographyEN:c,genres:u,albumsList:$}=e,le=x.querySelector(".modal-main-heading"),de=x.querySelector(".modal-artist-img"),ue=document.querySelector(".js-modal-years"),me=document.querySelector(".js-modal-sex"),fe=document.querySelector(".js-modal-members"),ge=document.querySelector(".js-modal-country"),pe=document.querySelector(".js-modal-bio"),G=document.querySelector(".modal-info-genres-list"),U=document.querySelector(".artist-modal-list");le.textContent=t,de.src=s,ue.textContent=m(r)&&m(n)?"-":`${m(r)?"unknown":r}-${m(n)?"present":n}`,me.textContent=m(a)?"-":a.trim(),fe.textContent=m(o)?"-":o,ge.textContent=m(i)?"-":i.trim(),pe.textContent=m(c)?"information missing":c.trim(),G.innerHTML="",G.insertAdjacentHTML("beforeend",_e(u)),U.innerHTML="",U.insertAdjacentHTML("beforeend",Re($))}function _e(e){return e.map(s=>`<li class="modal-info-genre-li"><p class="modal-info-genre">${s}</p></li>`).join("")}function Re(e){return e.map(s=>We(s)).join("")}function We({strAlbum:e,tracks:t}){return`<li class="modal-table-li"><h2 class="artist-modal-album-title">${e}</h2>
                        <table class="artist-modal-album">
                            <thead>
                                <tr>
                                   <th class="position-left" scope="col">Track</th>
                                   <th scope="col">Time</th>
                                   <th scope="col">Link</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${Ve(t)}
                            </tbody>
                        </table></li>`}function Ve(e){return e.map(s=>Ge(s)).join("")}function Ge({strTrack:e,intDuration:t,movie:s}){const r=s?`<svg class="icon-modal-artist-track-list" width="24" height="24"><use href="${O}#youtube"></use></svg>`:"";return`<tr>
                        <td class="position-left track-name">${e}</td>
                        <td class="track-time ">${xe(t)}</td>
                        <td><a class="link-modal-artist-track-list" target="_blank" href="${s}">${r}</a></td>
                    </tr>`}let f=1,d={},P="",y=null;async function W(e,t){const{artists:s,totalArtists:r}=await H(e,t);if(r===0){k.innerHTML="",g.innerHTML="",K.classList.remove("is-hidden");return}K.classList.add("is-hidden"),_(s),R(t,D(r))}async function Ue(e){try{T(),A();const t=e.target.value.trim();if(t.length===P.length)return;P=t,t?d.name=t:delete d.name,f=1,await W(d,f)}catch(t){console.log(t)}finally{C(),q()}}function ze(e){if(e){const t=e.nextElementSibling,s=t.classList.toggle("is-hidden");if(e.classList.toggle("open",!s),y&&y!==t){y.classList.add("is-hidden");const r=y.closest(".select").querySelector(".select-btn");r==null||r.classList.remove("open")}y=t;return}}async function Ye(e){try{if(ze(e.target.closest(".select-btn")),e.target.tagName==="LI"){const t=e.target.closest(".select"),s=t.querySelector(".select-input"),r=t.querySelector(".select-btn"),n=t.querySelector(".select-list-wrapper");if(s&&(s.value=e.target.textContent.trim()),r){const a=Array.from(r.childNodes).find(o=>o.nodeType===Node.TEXT_NODE);if(a){const o=e.target.textContent.trim();a.nodeValue=o;const i=t.dataset.selectName;i==="sortName"?o==="Default"?delete d.sortName:d={...d,[i]:o==="Z-A"?"desc":"asc"}:o==="All Genres"?delete d.genre:d={...d,[i]:o},f=1,T(),A(),await W(d,f)}}n&&n.classList.add("is-hidden")}}catch(t){console.log(t)}finally{C(),q()}}async function Je(e){const t=e.target.closest(".page-btn");if(!(!t||t.disabled||t.classList.contains("active")))try{const s=Number(t.dataset.page);if(s<1)return;f=s,T(),A();const{artists:r,totalArtists:n}=await H(d,f),a=D(n);_(r),R(f,a)}catch(s){console.log(s)}finally{C(),q()}}async function Ke(e){h.classList.add("is-open"),document.body.style.overflow="hidden",De(),Ie(),h.addEventListener("click",ne),document.addEventListener("keydown",oe);try{const t=await ve(e.target.dataset.id);Oe(t)}catch(t){console.log(t)}finally{je(),He();const t=x.querySelector(".modal-info-text");t&&(t.scrollTop=0)}}function ne(e){const t=e.target.closest(".modal-close-button"),s=e.target===h;(t||s)&&ae()}function oe(e){e.key==="Escape"&&ae()}function ae(){h.classList.remove("is-open"),document.body.style.overflow="",h.removeEventListener("click",ne),document.removeEventListener("keydown",oe)}function Pe(e){const t=e.target.closest(".filter-btn");t.classList.toggle("is-open"),t.nextElementSibling.classList.toggle("is-open"),t.classList.toggle("open")}function Qe(e){d={},f=1;const t=p.querySelectorAll(".select-btn");t[0].childNodes[0].nodeValue="Sorting",t[1].childNodes[0].nodeValue="Genre",p.reset(),W(d,f)}function Xe(e){const t=e.currentTarget,s=e.relatedTarget;t.contains(s)||(e.currentTarget.previousElementSibling.classList.remove("open"),setTimeout(()=>{t.querySelectorAll(".select-list-wrapper").forEach(n=>n.classList.add("is-hidden"))},150))}let F=!1;function Ze(){F=!0,setTimeout(()=>{F=!1},150)}function et(e){if(F)return;const t=e.currentTarget,s=e.relatedTarget;t.contains(s)||(e.target.classList.remove("open"),p.classList.remove("is-open"))}const tt="/feedbacks",N=l.querySelector('[data-error-for="name"]'),B=l.querySelector('[data-error-for="message"]'),I=l.querySelector('[data-error-for="rating"]'),w=l.elements.name,S=l.elements.message;//! Зірочки
const L=new Q(v,{starType:"i",click(e){e>=1&&(v.classList.remove("feedback-modal-error"),I.textContent=""),ce(e)}});L.init();const st=e=>b.post(`${Te}${tt}`,e);//! Валідація
const rt=e=>(w.classList.remove("feedback-modal-error"),S.classList.remove("feedback-modal-error"),N.textContent="",B.textContent="",I.textContent="",!e.name||e.name.length<3?(w.classList.add("feedback-modal-error"),N.textContent="Name must be at least 3 characters long",!1):!e.descr||e.descr.length<10?(S.classList.add("feedback-modal-error"),B.textContent="Description must be at least 10 characters long",!1):!e.rating||e.rating<1?(v.classList.add("feedback-modal-error"),I.textContent="Please select a rating from 1 to 5",!1):!0),ie=()=>{const e=w.value.trim(),t=S.value.trim();e.length>=3&&(w.classList.remove("feedback-modal-error"),N.textContent=""),t.length>=10&&(S.classList.remove("feedback-modal-error"),B.textContent=""),ce()},nt=async e=>{e.preventDefault();const t={name:l.elements.name.value.trim(),rating:L.score(),descr:l.elements.message.value.trim()};if(rt(t))try{const s=await st(t);z.success({message:"Your feedback submited successfully",position:"topRight",color:"#9f7ab2"}),localStorage.removeItem("feedbackFormData"),l.reset(),L.score(0),M()}catch{z.error({message:"Error submitting feedback",position:"topRight",color:"#af4040",messageColor:"black",overlay:!0})}},M=()=>{E.classList.remove("is-open"),se.classList.remove("no-scroll"),window.removeEventListener("keydown",V)},ot=()=>{E.classList.add("is-open"),se.classList.add("no-scroll"),window.addEventListener("keydown",V)},V=({key:e})=>{e==="Escape"&&M()},at=({target:e})=>{e===E&&M()},it=()=>{const e=localStorage.getItem("feedbackFormData");if(!e)return;const t=JSON.parse(e);//!Reopen modal form
t&&(l.elements.name.value=t.name,l.elements.message.value=t.descr,t.rating&&L.score(t.rating))},ce=e=>{const t=l.elements.name.value.trim(),s=l.elements.message.value.trim(),r=typeof e=="number"?e:L.score();if(!t&&!s&&!v){localStorage.removeItem("feedbackFormData");return}const n={name:t,descr:s,rating:r};localStorage.setItem("feedbackFormData",JSON.stringify(n))};//! Відкриття модалки
Me.addEventListener("click",ot);//! Закриття модалки
$e.addEventListener("click",M);window.addEventListener("keydown",V);E.addEventListener("click",at);//! видалення помилки валідації при введенні полів
l.addEventListener("input",ie);//! відправка на бекенд
l.addEventListener("submit",nt);//! збереження, видалення і отримання даних з LS
window.addEventListener("DOMContentLoaded",it);l.addEventListener("input",ie);const ct=["./img/webp/default-webp-for-hero-slider/image-slider-01.webp","./img/webp/default-webp-for-hero-slider/image-slider-02.webp","./img/webp/default-webp-for-hero-slider/image-slider-03.webp","./img/webp/default-webp-for-hero-slider/image-slider-04.webp","./img/webp/default-webp-for-hero-slider/image-slider-05.webp"];document.querySelector(".splide__list");function lt(){new Y("#slider-left",{direction:"ttb",height:"500px",type:"loop",drag:!1,arrows:!1,pagination:!1,autoScroll:{speed:.5}}).mount({AutoScroll:J}),new Y("#slider-right",{direction:"ttb",height:"500px",type:"loop",drag:!1,arrows:!1,pagination:!1,autoScroll:{speed:-.5}}).mount({AutoScroll:J})}function dt(e){const t=document.querySelector("#slider-left .splide__list"),s=document.querySelector("#slider-right .splide__list");t.innerHTML="",s.innerHTML="";const r=e.map((a,o)=>`<li class="splide__slide">
              <img src="${a.strArtistThumb}" alt="${a.strArtist}" loading="${o<2?"eager":"lazy"}" />
            </li>`).join(""),n=e.slice().reverse().map((a,o)=>`<li class="splide__slide">
              <img src="${a.strArtistThumb}" alt="${a.strArtist}" loading="${o<2?"eager":"lazy"}" />
            </li>`).join("");t.insertAdjacentHTML("beforeend",r),s.insertAdjacentHTML("beforeend",n),lt()}function ut(e){const t=e.map(s=>s.strArtistThumb).filter(Boolean);return t.length===0?ct:t}const mt=()=>{const e=document.querySelector(".burger-btn"),t=document.querySelector(".cross-icon"),s=document.querySelector(".burger-icon"),r=document.querySelector(".menu-burger"),n=document.querySelector(".menu-burger"),a=()=>{console.log("toggle"),s.classList.toggle("hide"),t.classList.toggle("hide"),n.classList.toggle("hide")};e.addEventListener("click",a),r.addEventListener("click",o=>{console.log(o.target.tagName),(o.target.tagName==="LI"||o.target.tagName==="A")&&(console.log(o.target.tagName),a())})};mt();async function ft(){T(),A();try{const{artists:e,totalArtists:t}=await H(),s=ut(e);dt(s.map(n=>({strArtistThumb:n}))),_(e);const r=await ke();R(1,D(t)),Be(r)}catch(e){console.log(e)}finally{C(),q()}}ft();p.addEventListener("input",Ue);p.addEventListener("click",Ye);p.addEventListener("focusout",Xe);re.addEventListener("focusout",et);re.addEventListener("mousedown",Ze);g.addEventListener("click",Je);Ce.addEventListener("click",Pe);qe.forEach(e=>e.addEventListener("click",Qe));k.addEventListener("click",e=>{e.target.closest(".learn-more-btn")&&Ke(e)});
//# sourceMappingURL=index.js.map
