import{a as k,R as we,i as Z,S as ee,A as te}from"./assets/vendor-C-kh9O4E.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();const ke="modulepreload",Ee=function(e){return"/ArtistsHub/"+e},se={},C=function(t,s,r){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=Promise.allSettled(s.map(i=>{if(i=Ee(i),i in se)return;se[i]=!0;const u=i.endsWith(".css"),q=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${q}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":ke,u||(m.as="script"),m.crossOrigin="",m.href=i,c&&m.setAttribute("nonce",c),document.head.appendChild(m),u)return new Promise((d,f)=>{m.addEventListener("load",d),m.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})}))}function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return n.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return t().catch(o)})};function Se(){const e=document.querySelector(".feedback");if(!e)return;new IntersectionObserver((s,r)=>{s.forEach(n=>{n.isIntersecting&&(Ae(),r.unobserve(n.target))})},{rootMargin:"200px"}).observe(e)}async function Ae(){const{default:e}=await C(async()=>{const{default:c}=await import("./assets/vendor-C-kh9O4E.js").then(i=>i.r);return{default:c}},[]),{default:t}=await C(async()=>{const{default:c}=await import("./assets/vendor-C-kh9O4E.js").then(i=>i.s);return{default:c}},[]),{Navigation:s,Pagination:r}=await C(async()=>{const{Navigation:c,Pagination:i}=await import("./assets/vendor-C-kh9O4E.js").then(u=>u.b);return{Navigation:c,Pagination:i}},[]),{getFeedbacks:n}=await C(async()=>{const{getFeedbacks:c}=await Promise.resolve().then(()=>Fe);return{getFeedbacks:c}},void 0),o=document.querySelectorAll(".arrow-btn"),a=document.querySelector(".swiper-wrapper");try{const c=[1,2,3];(await Promise.all(c.map(d=>n(d)))).flat().filter((d,f,y)=>f===y.findIndex(h=>h.descr===d.descr&&h.name===d.name)).sort(()=>Math.random()-.5).slice(0,10).forEach(({descr:d,name:f,rating:y})=>{const h=document.createElement("div");h.classList.add("swiper-slide");const N=Math.round(y);h.innerHTML=`
      <div class="feedback-item">
        <div class="raty" data-score="${N}"></div>
        <p class="feedback-text">"${d}"</p>
        <p class="feedback-author">${f}</p>
      </div>
    `,a.appendChild(h)}),document.querySelectorAll(".raty").forEach(d=>{const f=d.dataset.score;new e(d,{starType:"i",score:f,readOnly:!0}).init()}),new t(".swiper",{modules:[s,r],speed:400,spaceBetween:30,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!0,renderBullet:function(d,f){return`<span class="${f}"></span>`}}})}catch(c){console.error("Error fetching feedbacks:",c),a.innerHTML=`
      <div class="swiper-slide">
        <div class="feedback-item">
          <p class="feedback-text">Could not load reviews. Please try again later.</p>
        </div>
      </div>
    `,o.forEach(i=>{i.style.display="none"})}}const T=document.querySelector(".artists-list"),R=document.querySelector(".modal"),S=document.querySelector(".backdrop-with-modal"),L=document.querySelector(".artists-pages"),qe=document.querySelector(".js-genres-list"),re=document.querySelector(".header"),ie=document.querySelector(".filter-btn"),w=document.querySelector(".filters"),ne=document.querySelector(".artists-not-found"),Ce=document.querySelectorAll(".js-reset-btn"),ae=document.querySelector(".modal-loader"),ce=document.querySelector(".artists-loader"),le=document.querySelector(".modal-content"),de=document.querySelector(".artist-list-wrapper"),Te="https://sound-wave.b.goit.study/api",$e=document.querySelector(".js-feedback-btn"),x=document.querySelector(".backdrop-feedback-modal"),l=document.querySelector(".feedback-modal-form"),Me=document.querySelector(".js-feedback-modal-close-btn"),ue=document.body,$=document.querySelector("[data-raty]");l.querySelector('[data-error-for="name"]');l.querySelector('[data-error-for="message"]');const me=document.querySelector(".filters-dropdown-wrapper"),_e="https://sound-wave.b.goit.study/api";k.defaults.baseURL=_e;const F=8;async function fe(){return(await k.get("/genres")).data}async function B(e={},t=1){const s={limit:F,page:t,...e},r=await k.get("/artists",{params:s});return{artists:r.data.artists,totalArtists:r.data.totalArtists}}async function pe(e){return(await k.get(`/artists/${e}/albums`)).data}async function xe(e=1){const t={limit:F,page:e};return(await k.get("/feedbacks",{params:t})).data.data}const Fe=Object.freeze(Object.defineProperty({__proto__:null,PER_PAGE:F,getAllGenres:fe,getArtistInfoById:pe,getArtists:B,getFeedbacks:xe},Symbol.toStringTag,{value:"Module"}));function Be(e){const t=Math.floor(e/1e3),s=Math.floor(t/60),r=t%60;return`${s}:${r<10?"0":""}${r}`}function G(e){return Math.ceil(e/F)}function g(e){return e===null||e===0||e===void 0||e.trim()===""||e.trim().length<4}const U="/ArtistsHub/assets/sprite-NhoF_h07.svg";function Ie(e){const{genres:t,strArtist:s,strArtistThumb:r,strBiographyEN:n,_id:o}=e;return`<li class="artist-card"> 
  
    <img class="artist-thumb" src="${r}" alt="${s}" loading="lazy" decoding="async" width="288" height="288">
    ${t.length>0?`<ul class="artist-genres">
    ${je(t)}
    </ul>`:""}
    <h3 class="artist-name">${s}</h3>
    <p class="artist-biography">${g(n)?"information missing":n}</p>
    <button class="learn-more-btn" data-id="${o}">Learn More<svg width="24" height="24">
              <use href="${U}#icon-caret-right"></use>
            </svg></button>
    </li>`}function je(e){return e.map(s=>`<li class="genre-item">${s}</li>`).join("")}function z(e){const t=e.map(Ie).join("");T.innerHTML="",T.insertAdjacentHTML("beforeend",t)}function De(e){const t=e.map(({genre:s})=>`<li class="select-item">${s}</li>`).join("");qe.insertAdjacentHTML("beforeend",t)}function Y(e,t){if(e>t)return;if(t===1){L.innerHTML="",L.classList.add("is-hidden");return}L.classList.remove("is-hidden");let s="";const r=window.innerWidth;s+=n(!0),s+=c(1),(e>3||r<768&&e>2)&&(s+=a()),e>2&&r>=768&&(s+=c(e-1)),e!==1&&e!==t&&(s+=c(e)),e<t-1&&r>=768&&(s+=c(e+1)),(e<t-2||r<768&&t-1)&&(s+=a()),t>1&&(s+=c(t)),s+=n(!1),L.innerHTML=s;function n(i){const u=e===(i?1:t);return`
    <a 
      ${u?"":'href="#artists-content"'}
      class="page-btn artists-arrow-btn ${u?"disabled":""}"
      ${u?"":`data-page="${e+(i?-1:1)}"`}
        aria-label="Go to ${i?"previous":"next"} page">      
      <svg width="24" height="24">
        <use href="${U}${i?"#left-arrow-btn":"#right-arrow-btn"}"></use>
      </svg>
    </a>
  `}function o(i){return i===e}function a(){return'<span class="dots">...</span>'}function c(i){return`<a ${o(i)?"":'href="#artists-content"'} class="page-btn ${o(i)?"active":""}" data-page="${i}" aria-label="Go to page ${i}">${i}</a>`}}function Oe(){ae.classList.remove("is-hidden")}function He(){ae.classList.add("is-hidden")}function I(){ce.classList.remove("is-hidden")}function j(){ce.classList.add("is-hidden")}function Ne(){le.classList.remove("is-hidden")}function Re(){le.classList.add("is-hidden")}function D(){de.classList.remove("is-hidden")}function O(){de.classList.add("is-hidden")}function Pe(e){const{strArtist:t,strArtistThumb:s,intFormedYear:r,intDiedYear:n,strGender:o,intMembers:a,strCountry:c,strBiographyEN:i,genres:u,albumsList:q}=e,m=R.querySelector(".modal-main-heading"),d=R.querySelector(".modal-artist-img"),f=document.querySelector(".js-modal-years"),y=document.querySelector(".js-modal-sex"),h=document.querySelector(".js-modal-members"),N=document.querySelector(".js-modal-country"),ve=document.querySelector(".js-modal-bio"),Q=document.querySelector(".modal-info-genres-list"),X=document.querySelector(".artist-modal-list");m.textContent=t,d.src=s,f.textContent=g(r)&&g(n)?"-":`${g(r)?"unknown":r}-${g(n)?"present":n}`,y.textContent=g(o)?"-":o.trim(),h.textContent=g(a)?"-":a,N.textContent=g(c)?"-":c.trim(),ve.textContent=g(i)?"information missing":i.trim(),Q.innerHTML="",Q.insertAdjacentHTML("beforeend",Ve(u)),X.innerHTML="",X.insertAdjacentHTML("beforeend",We(q))}function Ve(e){return e.map(s=>`<li class="modal-info-genre-li"><p class="modal-info-genre">${s}</p></li>`).join("")}function We(e){return e.map(s=>Ge(s)).join("")}function Ge({strAlbum:e,tracks:t}){return`<li class="modal-table-li"><h2 class="artist-modal-album-title">${e}</h2>
                        <table class="artist-modal-album">
                            <thead>
                                <tr>
                                   <th class="position-left" scope="col">Track</th>
                                   <th scope="col">Time</th>
                                   <th scope="col">Link</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${Ue(t)}
                            </tbody>
                        </table></li>`}function Ue(e){return e.map(s=>ze(s)).join("")}function ze({strTrack:e,intDuration:t,movie:s}){const r=s?`<svg class="icon-modal-artist-track-list" width="24" height="24"><use href="${U}#youtube"></use></svg>`:"";return`<tr>
                        <td class="position-left track-name">${e}</td>
                        <td class="track-time ">${Be(t)}</td>
                        <td><a class="link-modal-artist-track-list" target="_blank" href="${s}">${r}</a></td>
                    </tr>`}let b=1,p={},oe="",E=null;async function J(e,t){const{artists:s,totalArtists:r}=await B(e,t);if(r===0){T.innerHTML="",L.innerHTML="",ne.classList.remove("is-hidden");return}ne.classList.add("is-hidden"),z(s),Y(t,G(r))}async function Ye(e){try{O(),I();const t=e.target.value.trim();if(t.length===oe.length)return;oe=t,t?p.name=t:delete p.name,b=1,await J(p,b)}catch(t){console.log(t)}finally{j(),D()}}function Je(e){if(e){const t=e.nextElementSibling,s=t.classList.toggle("is-hidden");if(e.classList.toggle("open",!s),E&&E!==t){E.classList.add("is-hidden");const r=E.closest(".select").querySelector(".select-btn");r==null||r.classList.remove("open")}E=t;return}}async function Ke(e){try{if(Je(e.target.closest(".select-btn")),e.target.tagName==="LI"){const t=e.target.closest(".select"),s=t.querySelector(".select-input"),r=t.querySelector(".select-btn"),n=t.querySelector(".select-list-wrapper");if(s&&(s.value=e.target.textContent.trim()),r&&(r.classList.remove("open"),r.focus()),n&&n.classList.add("is-hidden"),r){const o=Array.from(r.childNodes).find(a=>a.nodeType===Node.TEXT_NODE);if(o){const a=e.target.textContent.trim();o.nodeValue=a;const c=t.dataset.selectName;let i;if(c==="sortName"?i=a==="Default"?void 0:a==="Z-A"?"desc":"asc":i=a==="All Genres"?void 0:a,p[c]===i)return;i===void 0?delete p[c]:p={...p,[c]:i},b=1,O(),I(),await J(p,b)}}}}catch(t){console.log(t)}finally{j(),D()}}async function Qe(e){const t=e.target.closest(".page-btn");if(!(!t||t.disabled||t.classList.contains("active")))try{const s=Number(t.dataset.page);if(s<1)return;b=s,O(),I();const{artists:r,totalArtists:n}=await B(p,b),o=G(n);z(r),Y(b,o)}catch(s){console.log(s)}finally{j(),D()}}async function Xe(e){S.classList.add("is-open"),document.body.style.overflow="hidden",Re(),Oe(),S.addEventListener("click",ge),document.addEventListener("keydown",be);try{const t=await pe(e.target.dataset.id);Pe(t)}catch(t){console.log(t)}finally{He(),Ne();const t=R.querySelector(".modal-info-text");t&&(t.scrollTop=0)}}function ge(e){const t=e.target.closest(".modal-close-button"),s=e.target===S;(t||s)&&he()}function be(e){e.key==="Escape"&&he()}function he(){S.classList.remove("is-open"),document.body.style.overflow="",S.removeEventListener("click",ge),document.removeEventListener("keydown",be)}function Ze(e){const t=e.target.closest(".filter-btn");t.classList.toggle("is-open"),t.nextElementSibling.classList.toggle("is-open"),t.classList.toggle("open")}function et(e){p={},b=1;const t=w.querySelectorAll(".select-btn");t[0].childNodes[0].nodeValue="Sorting",t[1].childNodes[0].nodeValue="Genre",w.reset(),J(p,b)}function tt(e){if(v)return;const t=e.currentTarget,s=e.relatedTarget;t.contains(s)||(t.previousElementSibling.classList.remove("open","is-open"),setTimeout(()=>{t.querySelectorAll(".select-list-wrapper").forEach(o=>o.classList.add("is-hidden")),t.querySelectorAll(".select-btn").forEach(o=>o.classList.remove("open"))},150))}let v=!1;function st(e){v=!0,e.target.classList.contains("filters")&&(v=!1),e.target.classList.contains("select-list-wrapper")&&(v=!1),setTimeout(()=>{v=!1},150)}function rt(e){if(v)return;const t=e.currentTarget,s=e.relatedTarget;t.contains(s)||(e.target.classList.remove("open","is-open"),w.classList.remove("is-open"),ie.classList.remove("open"))}function nt(e){window.scrollY>50?re.classList.add("scrolled"):re.classList.remove("scrolled")}const ot="/feedbacks",P=l.querySelector('[data-error-for="name"]'),V=l.querySelector('[data-error-for="message"]'),W=l.querySelector('[data-error-for="rating"]'),M=l.elements.name,_=l.elements.message;//! Зірочки
const A=new we($,{starType:"i",click(e){e>=1&&($.classList.remove("feedback-modal-error"),W.textContent=""),Le(e)}});A.init();const it=e=>k.post(`${Te}${ot}`,e);//! Валідація
const at=e=>(M.classList.remove("feedback-modal-error"),_.classList.remove("feedback-modal-error"),P.textContent="",V.textContent="",W.textContent="",!e.name||e.name.length<3?(M.classList.add("feedback-modal-error"),P.textContent="Name must be at least 3 characters long",!1):!e.descr||e.descr.length<10?(_.classList.add("feedback-modal-error"),V.textContent="Description must be at least 10 characters long",!1):!e.rating||e.rating<1?($.classList.add("feedback-modal-error"),W.textContent="Please select a rating from 1 to 5",!1):!0),ye=()=>{const e=M.value.trim(),t=_.value.trim();e.length>=3&&(M.classList.remove("feedback-modal-error"),P.textContent=""),t.length>=10&&(_.classList.remove("feedback-modal-error"),V.textContent=""),Le()},ct=async e=>{e.preventDefault();const t={name:l.elements.name.value.trim(),rating:A.score(),descr:l.elements.message.value.trim()};if(at(t))try{const s=await it(t);Z.success({message:"Your feedback submited successfully",position:"topRight",color:"#9f7ab2"}),localStorage.removeItem("feedbackFormData"),l.reset(),A.score(0),H()}catch{Z.error({message:"Error submitting feedback",position:"topRight",color:"#af4040",messageColor:"black",overlay:!0})}},H=()=>{x.classList.remove("is-open"),ue.classList.remove("no-scroll"),window.removeEventListener("keydown",K)},lt=()=>{x.classList.add("is-open"),ue.classList.add("no-scroll"),window.addEventListener("keydown",K)},K=({key:e})=>{e==="Escape"&&H()},dt=({target:e})=>{e===x&&H()},ut=()=>{const e=localStorage.getItem("feedbackFormData");if(!e)return;const t=JSON.parse(e);//!Reopen modal form
t&&(l.elements.name.value=t.name,l.elements.message.value=t.descr,t.rating&&A.score(t.rating))},Le=e=>{const t=l.elements.name.value.trim(),s=l.elements.message.value.trim(),r=typeof e=="number"?e:A.score();if(!t&&!s&&!$){localStorage.removeItem("feedbackFormData");return}const n={name:t,descr:s,rating:r};localStorage.setItem("feedbackFormData",JSON.stringify(n))};//! Відкриття модалки
$e.addEventListener("click",lt);//! Закриття модалки
Me.addEventListener("click",H);window.addEventListener("keydown",K);x.addEventListener("click",dt);//! видалення помилки валідації при введенні полів
l.addEventListener("input",ye);//! відправка на бекенд
l.addEventListener("submit",ct);//! збереження, видалення і отримання даних з LS
window.addEventListener("DOMContentLoaded",ut);l.addEventListener("input",ye);const mt=["./img/webp/default-webp-for-hero-slider/image-slider-01.webp","./img/webp/default-webp-for-hero-slider/image-slider-02.webp","./img/webp/default-webp-for-hero-slider/image-slider-03.webp","./img/webp/default-webp-for-hero-slider/image-slider-04.webp","./img/webp/default-webp-for-hero-slider/image-slider-05.webp"];document.querySelector(".splide__list");function ft(){new ee("#slider-left",{direction:"ttb",height:"500px",type:"loop",drag:!1,arrows:!1,pagination:!1,autoScroll:{speed:.5}}).mount({AutoScroll:te}),new ee("#slider-right",{direction:"ttb",height:"500px",type:"loop",drag:!1,arrows:!1,pagination:!1,autoScroll:{speed:-.5}}).mount({AutoScroll:te})}function pt(e){const t=document.querySelector("#slider-left .splide__list"),s=document.querySelector("#slider-right .splide__list");t.innerHTML="",s.innerHTML="";const r=e.map((o,a)=>`<li class="splide__slide">
              <img src="${o.strArtistThumb}" alt="${o.strArtist}" loading="${a<2?"eager":"lazy"}" />
            </li>`).join(""),n=e.slice().reverse().map((o,a)=>`<li class="splide__slide">
              <img src="${o.strArtistThumb}" alt="${o.strArtist}" loading="${a<2?"eager":"lazy"}" />
            </li>`).join("");t.insertAdjacentHTML("beforeend",r),s.insertAdjacentHTML("beforeend",n),ft()}function gt(e){const t=e.map(s=>s.strArtistThumb).filter(Boolean);return t.length===0?mt:t}const bt=()=>{const e=document.querySelector(".burger-btn"),t=document.querySelector(".cross-icon"),s=document.querySelector(".burger-icon"),r=document.querySelector(".menu-burger");if(!e||!t||!s||!r)return;const n=()=>{s.classList.toggle("hide"),t.classList.toggle("hide"),r.classList.toggle("hide")};e.addEventListener("click",n),r.addEventListener("click",o=>{o.target.closest("a")&&n()})};bt();Se();async function ht(){O(),I();try{const{artists:e,totalArtists:t}=await B(),s=gt(e);pt(s.map(n=>({strArtistThumb:n}))),z(e);const r=await fe();Y(1,G(t)),De(r)}catch(e){console.log(e)}finally{j(),D()}}ht();w.addEventListener("input",Ye);w.addEventListener("click",Ke);w.addEventListener("focusout",tt);me.addEventListener("focusout",rt);me.addEventListener("mousedown",st);L.addEventListener("click",Qe);ie.addEventListener("click",Ze);Ce.forEach(e=>e.addEventListener("click",et));T.addEventListener("click",e=>{e.target.closest(".learn-more-btn")&&Xe(e)});window.addEventListener("scroll",nt);
//# sourceMappingURL=index.js.map
