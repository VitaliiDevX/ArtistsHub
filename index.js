import{a as m,S as J,N as K,P as z,R as F,i as g,b as x,A as T}from"./assets/vendor-BREOjyBh.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();const Q="https://sound-wave.b.goit.study/api";m.defaults.baseURL=Q;const A=8;async function X(){return(await m.get("/genres")).data}async function L(t={},e=1){const s={limit:A,page:e,...t},o=await m.get("/artists",{params:s});return{artists:o.data.artists,totalArtists:o.data.totalArtists}}async function Z(t){return(await m.get(`/artists/${t}/albums`)).data}async function tt(t=1){const e={limit:A,page:t};return(await m.get("/feedbacks",{params:e})).data.data}const et=document.querySelectorAll(".arrow-btn");async function st(){const t=document.querySelector(".swiper-wrapper");try{const e=[1,2,3];(await Promise.all(e.map(r=>tt(r)))).flat().sort(()=>Math.random()-.5).slice(0,8).forEach(({descr:r,name:a,rating:d})=>{const u=document.createElement("div");u.classList.add("swiper-slide");const f=Math.round(d);u.innerHTML=`
      <div class="feedback-item">
        <div class="raty" data-score="${f}"></div>
        <p class="feedback-text">"${r}"</p>
        <p class="feedback-author">${a}</p>
      </div>
    `,t.appendChild(u)}),document.querySelectorAll(".raty").forEach(r=>{const a=r.dataset.score;new F(r,{starType:"i",score:a,readOnly:!0}).init()})}catch(e){console.error("Error fetching feedbacks:",e),t.innerHTML=`
      <div class="swiper-slide">
        <div class="feedback-item">
          <p class="feedback-text">Could not load reviews. Please try again later.</p>
        </div>
      </div>
    `,et.forEach(s=>{s.style.display="none"})}}st().then(()=>{new J(".swiper",{modules:[K,z],speed:400,spaceBetween:30,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(t,e){return`<span class="${e}"></span>`}}})});const E=document.querySelector(".artists-list"),B=document.querySelector(".modal"),p=document.querySelector(".backdrop-with-modal");document.querySelector(".artist-modal-list");const $=document.querySelector(".artists-pages"),nt=document.querySelector(".js-genres-list"),rt=document.querySelector(".filter-btn"),j=document.querySelector(".filters");function ot(t){const e=Math.floor(t/1e3),s=Math.floor(e/60),o=e%60;return`${s}:${o<10?"0":""}${o}`}function k(t){return Math.ceil(t/A)}const h="/ArtistsHub/assets/sprite-BbPC8BII.svg";function at(t){const{genres:e,strArtist:s,strArtistThumb:o,strBiographyEN:n,_id:r}=t;return`<li class="artist-card"> 
  
    <img  class="artist-thumb" src="${o}" alt="${s}">
    <ul class="artist-genres">
    ${it(e)}
    </ul>
    <h2 class="artist-name">${s}</h2>
    <p class="artist-biography">${n}</p>
    <button class="learn-more-btn" data-id="${r}">Learn More<svg width="24" height="24">
              <use href="${h}#icon-caret-right"></use>
            </svg></button>
    </li>`}function it(t){return t.map(s=>`<li class="genre-item">${s}</li>`).join("")}function v(t){const e=t.map(at).join("");E.innerHTML="",E.insertAdjacentHTML("beforeend",e)}function ct(t){const e=t.map(({genre:s})=>`<li class="select-item">${s}</li>`).join("");nt.insertAdjacentHTML("beforeend",e)}function w(t,e){if(e===1){$.innerHTML="";return}if(t>e)return;let s="";s+=`
    <a href="#artists-content" class="page-btn artists-arrow-btn" ${t===1?"disabled":""} data-page="${t-1}">
      <svg width="24" height="24">
        <use href="${h}#left-arrow-btn"></use>
      </svg>
    </a>
  `,s+=`<a href="#artists-content" class="page-btn ${t===1?"active":""}" data-page="1">1</a>`,(t>3||window.innerWidth<768&&t>2)&&(s+='<span class="dots">...</span>'),console.log(t>3),console.log(window.innerWidth<768&&t>2),t>2&&window.innerWidth>=768&&(s+=`<a href="#artists-content" class="page-btn" data-page="${t-1}">${t-1}</a>`),t!==1&&t!==e&&(s+=`<a href="#artists-content" class="page-btn active" data-page="${t}">${t}</a>`),t<e-1&&window.innerWidth>=768&&(s+=`<a href="#artists-content" class="page-btn" data-page="${t+1}">${t+1}</a>`),t<e-2&&(s+='<span class="dots">...</span>'),e>1&&(s+=`<a href="#artists-content" class="page-btn ${t===e?"active":""}" data-page="${e}">${e}</a>`),s+=`
    <a href="#artists-content" class="page-btn artists-arrow-btn" ${t===e?"disabled":""} data-page="${t+1}">
      <svg width="24" height="24">
        <use href="${h}#right-arrow-btn"></use>
      </svg>
    </a> 
  `,$.innerHTML=s}function lt(t){const{strArtist:e,strArtistThumb:s,intFormedYear:o,intDiedYear:n,strGender:r,intMembers:a,strCountry:d,strBiographyEN:u,genres:f,albumsList:P}=t,R=B.querySelector(".modal-main-heading");R.textContent=e;const W=B.querySelector(".modal-artist-img");W.src=s;const G=document.querySelector(".js-modal-years");G.textContent=n===null?`${o}-present`:`${o}-${n}`;const _=document.querySelector(".js-modal-sex");_.textContent=r;const U=document.querySelector(".js-modal-members");U.textContent=a;const V=document.querySelector(".js-modal-country");V.textContent=d;const Y=document.querySelector(".js-modal-bio");Y.textContent=u;const M=document.querySelector(".modal-info-genres-list");M.innerHTML="",M.insertAdjacentHTML("beforeend",dt(f));const q=document.querySelector(".artist-modal-list");q.innerHTML="",q.insertAdjacentHTML("beforeend",ut(P))}function dt(t){return t.map(s=>`<li class="modal-info-genre-li"><p class="modal-info-genre">${s}</p></li>`).join("")}function ut(t){return t.map(s=>mt(s)).join("")}function mt({strAlbum:t,tracks:e}){return`<li class="modal-table-li"><h2 class="artist-modal-album-title">${t}</h2>
                        <table class="artist-modal-album">
                            <thead>
                                <tr>
                                   <th scope="col">Track</th>
                                   <th scope="col">Time</th>
                                   <th scope="col">Link</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${ft(e)}
                            </tbody>
                        </table></li>`}function ft(t){return t.map(s=>gt(s)).join("")}function gt({strTrack:t,intDuration:e,movie:s}){const o=s?`<svg class="icon-modal-artist-track-list" width="24" height="24"><use href="${h}#youtube"></use></svg>`:"";return`<tr>
                        <td>${t}</td>
                        <td>${ot(e)}</td>
                        <td><a class="link-modal-artist-track-list" href="${s}">${o}</a></td>
                    </tr>`}let c=1,i={},N="",y=null;async function pt(t){try{const e=t.target.value.trim();if(e.length===N.length)return;N=e,e?i.name=e:delete i.name,c=1;const{artists:s,totalArtists:o}=await L(i,c);v(s),w(c,k(o))}catch(e){console.log(e)}}async function bt(t){try{if(t.target.closest(".select-btn")){const e=t.target.closest(".select-btn").nextElementSibling;e.classList.toggle("is-hidden"),y&&y!==e&&y.classList.add("is-hidden"),y=e;return}if(t.target.tagName==="LI"){const e=t.target.closest(".select"),s=e.querySelector(".select-input"),o=e.querySelector(".select-btn"),n=e.querySelector(".select-list-wrapper");if(s&&(s.value=t.target.textContent.trim()),o){const r=Array.from(o.childNodes).find(a=>a.nodeType===Node.TEXT_NODE);if(r){const a=t.target.textContent.trim();r.nodeValue=a;const d=e.dataset.selectName;d==="sortName"?a==="Default"?delete i.sortName:i={...i,[d]:a==="Z-A"?"desc":"asc"}:a==="All Genres"?delete i.genre:i={...i,[d]:a},c=1;const{artists:u,totalArtists:f}=await L(i,c);v(u),w(c,k(f))}}n&&n.classList.add("is-hidden")}}catch(e){console.log(e)}}async function yt(t){const e=t.target.closest(".page-btn");if(!e||e.disabled||e.classList.contains("active"))return;const s=Number(e.dataset.page);if(s<1)return;c=s,console.log(c);const{artists:o,totalArtists:n}=await L(i,c),r=k(n);console.log(o,n,r),v(o),w(c,r)}async function ht(t){p.classList.add("is-open");const e=await Z(t.target.dataset.id);lt(e),document.body.style.overflow="hidden",p.addEventListener("click",D),document.addEventListener("keydown",I)}function D(t){const e=t.target.closest(".modal-close-button"),s=t.target===p;(e||s)&&H()}function I(t){t.key==="Escape"&&H()}function H(){p.classList.remove("is-open"),document.body.style.overflow="",p.removeEventListener("click",D),document.removeEventListener("keydown",I)}function Lt(t){const e=t.target.closest(".filter-btn");e.nextElementSibling.style.display==="flex"?e.nextElementSibling.style.display="none":e.nextElementSibling.style.display="flex"}const kt="https://sound-wave.b.goit.study/api",vt="/feedbacks",wt=document.querySelector(".js-feedback-btn"),C=document.querySelector(".backdrop-feedback-modal"),l=document.querySelector(".feedback-modal-form"),St=document.querySelector(".js-feedback-modal-close-btn"),O=document.body,Et=document.querySelector("[data-raty]");//! Зірочки
const b=new F(Et,{starType:"i"});b.init();const $t=t=>m.post(`${kt}${vt}`,t);//! Валідація
const At=t=>!t.name||t.name.length<3?(g.warning({message:"Name must be at least 3 characters long",position:"topRight",color:"#764191"}),!1):!t.descr||t.descr.length<10?(g.warning({message:"Description must be at least 10 characters long",position:"topRight"}),!1):t.rating===void 0?(g.warning({message:"Rating must be between 1 and 5",position:"topRight"}),!1):!0,Ct=async t=>{t.preventDefault();const e={name:l.elements.name.value.trim(),rating:b.score(),descr:l.elements.message.value.trim()};if(console.log(e),!!At(e)){console.log(e);try{const s=await $t(e);console.log(s),g.success({message:"Your feedback submited successfully",position:"topRight"}),localStorage.removeItem("feedbackFormData"),l.reset(),b.score(0),S()}catch(s){console.log(s),g.error({message:"Error submitting feedback",position:"topRight"})}}},S=()=>{C.classList.remove("is-open"),O.classList.remove("no-scroll")},Mt=()=>{C.classList.add("is-open"),O.classList.add("no-scroll")},qt=({key:t})=>{t==="Escape"&&S()},xt=({target:t})=>{t===C&&S()},Tt=()=>{const t=JSON.parse(localStorage.getItem("feedbackFormData"));t&&(l.elements.name.value=t.name||"",l.elements.message.value=t.descr||"",t.rating&&b.score(t.rating))},Bt=()=>{const t={name:l.elements.name.value.trim(),descr:l.elements.message.value.trim(),rating:b.score()};localStorage.setItem("feedbackFormData",JSON.stringify(t))};//! Відкриття модалки
wt.addEventListener("click",Mt);//! Закриття модалки
St.addEventListener("click",S);window.addEventListener("keydown",qt);window.addEventListener("click",xt);l.addEventListener("submit",Ct);window.addEventListener("DOMContentLoaded",Tt);l.addEventListener("click",Bt);const Nt=()=>{const t=document.querySelector(".burger-btn"),e=document.querySelector(".cross-icon"),s=document.querySelector(".burger-icon"),o=document.querySelector(".menu-burger");t.addEventListener("click",()=>{s.classList.toggle("hide"),e.classList.toggle("hide"),o.classList.toggle("hide")})};function Ft(){new x("#slider-left",{direction:"ttb",height:"500px",type:"loop",drag:!1,arrows:!1,pagination:!1,autoScroll:{speed:.5}}).mount({AutoScroll:T}),new x("#slider-right",{direction:"ttb",height:"500px",type:"loop",drag:!1,arrows:!1,pagination:!1,autoScroll:{speed:-.5}}).mount({AutoScroll:T})}document.addEventListener("DOMContentLoaded",()=>{Ft()});Nt();async function jt(){const{artists:t,totalArtists:e}=await L();v(t);const s=await X();w(1,k(e)),ct(s)}jt();j.addEventListener("input",pt);j.addEventListener("click",bt);$.addEventListener("click",yt);rt.addEventListener("click",Lt);E.addEventListener("click",t=>{t.target.closest(".learn-more-btn")&&ht(t)});
//# sourceMappingURL=index.js.map
