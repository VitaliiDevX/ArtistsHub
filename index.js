import{a as p,S as M,N,P as q,R as C}from"./assets/vendor-BJTl0V0a.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();const T="https://sound-wave.b.goit.study/api";p.defaults.baseURL=T;const w=8;async function x(){return(await p.get("/genres")).data}async function m(t={},e=1){const s={limit:w,page:e,...t},a=await p.get("/artists",{params:s});return{artists:a.data.artists,totalArtists:a.data.totalArtists}}async function O(t=1){const e={limit:w,page:t};return(await p.get("/feedbacks",{params:e})).data.data}async function P(){const t=document.querySelector(".swiper-wrapper"),e=Math.ceil(1012/8),s=Math.floor(Math.random()*e)+1;(await O(s)).sort(()=>Math.random()-.5).slice(0,8).forEach(({descr:r,name:i,rating:l})=>{const d=document.createElement("div");d.classList.add("swiper-slide");const b=Math.round(l);d.innerHTML=`
      <div class="feedback-item">
        <div class="raty" data-score="${b}"></div>
        <p class="feedback-text">"${r}"</p>
        <p class="feedback-author">${i}</p>
      </div>
    `,t.appendChild(d)}),document.querySelectorAll(".raty").forEach(r=>{const i=r.dataset.score;new C(r,{starType:"i",score:i,readOnly:!0}).init()})}P().then(()=>{new M(".swiper",{modules:[N,q],speed:400,spaceBetween:30,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(t,e){return`<span class="${e}"></span>`}}})});const L=document.querySelector(".artists-list");document.querySelector(".modal");document.querySelector(".artist-modal-list");const v=document.querySelector(".artists-pages"),$=document.querySelector(".filters"),B=document.querySelector(".js-genres-list"),u=document.querySelector(".backdrop-with-modal");document.querySelector(".modal-close-button");function g(t){return Math.ceil(t/w)}function j(t){const{genres:e,strArtist:s,strArtistThumb:a,strBiographyEN:n,_id:r}=t;return`<li class="artist-card"> 
  
    <img  class="artist-thumb" src="${a}" alt="${s}">
    <ul class="artist-genres">
    ${H(e)}
    </ul>
    <h2 class="artist-name">${s}</h2>
    <p class="artist-biography">${n}</p>
    <button class="learn-more-btn" data-id="${r}">Learn More<svg width="24" height="24">
              <use href="./img/sprite.svg#icon-caret-right"></use>
            </svg></button>
    </li>`}function H(t){return t.map(s=>`<li class="genre-item">${s}</li>`).join("")}function y(t){const e=t.map(j).join("");L.innerHTML="",L.insertAdjacentHTML("beforeend",e)}function R(t){const e=t.map(({genre:s})=>`<li class="select-item">${s}</li>`).join("");B.insertAdjacentHTML("beforeend",e)}function h(t,e){if(e===1){v.innerHTML="";return}if(t>e)return;let s="";s+=`
    <a href="#artists" class="page-btn" ${t===1?"disabled":""} data-page="${t-1}">
      ←
    </a>
  `,s+=`<a href="#artists" class="page-btn ${t===1?"active":""}" data-page="1">1</a>`,t>3&&(s+='<span class="dots">...</span>'),t>2&&(s+=`<a href="#artists" class="page-btn" data-page="${t-1}">${t-1}</a>`),t!==1&&t!==e&&(s+=`<a href="#artists" class="page-btn active" data-page="${t}">${t}</a>`),t<e-1&&(s+=`<a href="#artists" class="page-btn" data-page="${t+1}">${t+1}</a>`),t<e-2&&(s+='<span class="dots">...</span>'),e>1&&(s+=`<a href="#artists" class="page-btn ${t===e?"active":""}" data-page="${e}">${e}</a>`),s+=`
    <a href="#artists" class="page-btn" ${t===e?"disabled":""} data-page="${t+1}">
      →
    </a> 
  `,v.innerHTML=s}let c=1,o={},E="",f=null;async function G(t){try{const e=t.target.value.trim();if(e.length===E.length)return;E=e,e?o.name=e:delete o.name,c=1;const{artists:s,totalArtists:a}=await m(o,c);y(s),h(c,g(a))}catch(e){console.log(e)}}async function F(t){try{if(t.target.closest(".select-btn")){const e=t.target.closest(".select-btn").nextElementSibling;e.classList.toggle("is-hidden"),f&&f!==e&&f.classList.add("is-hidden"),f=e;return}if(t.target.tagName==="LI"){const e=t.target.closest(".select"),s=e.querySelector(".select-input"),a=e.querySelector(".select-btn"),n=e.querySelector(".select-list-wrapper");if(s&&(s.value=t.target.textContent.trim()),a){const r=Array.from(a.childNodes).find(i=>i.nodeType===Node.TEXT_NODE);if(r){const i=t.target.textContent.trim();r.nodeValue=i;const l=e.dataset.selectName;l==="sortName"?i==="Default"?delete o.sortName:o={...o,[l]:i==="Z-A"?"desc":"asc"}:i==="All Genres"?delete o.genre:o={...o,[l]:i},c=1;const{artists:d,totalArtists:b}=await m(o,c);y(d),h(c,g(b))}}n&&n.classList.add("is-hidden")}}catch(e){console.log(e)}}async function I(t){const e=t.target.closest(".page-btn");if(!e||e.disabled||e.classList.contains("active"))return;const s=Number(e.dataset.page);if(s<1)return;c=s,console.log(c);const{artists:a,totalArtists:n}=await m(o,c),r=g(n);console.log(a,n,r),y(a),h(c,r)}async function _(t){u.classList.add("is-open"),document.body.style.overflow="hidden",u.addEventListener("click",A),document.addEventListener("keydown",k)}function A(t){const e=t.target.closest(".modal-close-button"),s=t.target===u;(e||s)&&S()}function k(t){t.key==="Escape"&&S()}function S(){u.classList.remove("is-open"),document.body.style.overflow="",u.removeEventListener("click",A),document.removeEventListener("keydown",k)}async function V(){const{artists:t,totalArtists:e}=await m();y(t);const s=await x();h(1,g(e)),R(s)}V();$.addEventListener("input",G);$.addEventListener("click",F);v.addEventListener("click",I);L.addEventListener("click",t=>{t.target.closest(".learn-more-btn")&&_()});
//# sourceMappingURL=index.js.map
